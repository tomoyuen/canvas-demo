{"version":3,"sources":["webpack:///./src/utils/makeSprite.js","webpack:///./node_modules/three/examples/js/renderers/Projector.js","webpack:///./src/components/Lines.vue?706b","webpack:///./node_modules/core-js/internals/array-fill.js","webpack:///src/components/Lines.vue","webpack:///./node_modules/core-js/modules/es.array.fill.js","webpack:///./src/components/Lines.vue?1d78","webpack:///./src/components/Lines.vue?16e2","webpack:///./src/components/Lines.vue"],"names":["color","spriteSize","PI2","Math","PI","canvas","document","createElement","ctx","getContext","width","height","fillStyle","beginPath","arc","fill","sprite","THREE","Texture","needsUpdate","RenderableObject","this","id","object","z","renderOrder","RenderableFace","v1","RenderableVertex","v2","v3","normalModel","Vector3","vertexNormalsModel","vertexNormalsLength","Color","material","uvs","Vector2","position","positionWorld","positionScreen","Vector4","visible","prototype","copy","vertex","RenderableLine","vertexColors","RenderableSprite","x","y","rotation","scale","Projector","_object","_objectCount","_vertex","_vertexCount","_face","_faceCount","_line","_lineCount","_sprite","_spriteCount","_modelMatrix","_objectPool","_objectPoolLength","_vertexPool","_vertexPoolLength","_facePool","_facePoolLength","_linePool","_linePoolLength","_spritePool","_spritePoolLength","_renderData","objects","lights","elements","_vector3","_vector4","_clipBox","Box3","_boundingBox","_points3","Array","_viewMatrix","Matrix4","_viewProjectionMatrix","_modelViewProjectionMatrix","_normalMatrix","Matrix3","_frustum","Frustum","_clippedVertex1PositionScreen","_clippedVertex2PositionScreen","projectVector","vector","camera","console","warn","project","unprojectVector","unproject","pickingRay","error","RenderList","normals","colors","normalMatrix","setObject","value","getNormalMatrix","matrixWorld","length","projectVertex","applyMatrix4","invW","w","pushVertex","getNextVertexInPool","set","pushNormal","push","pushColor","r","g","b","pushUv","checkTriangleVisibility","intersectsBox","setFromPoints","checkBackfaceCulling","pushLine","a","clipLine","multiplyScalar","getNextLineInPool","max","VertexColors","fromArray","pushTriangle","c","side","DoubleSide","getNextFaceInPool","subVectors","cross","applyMatrix3","normalize","i","normal","arguments","uv","FaceColors","renderList","projectObject","Light","Mesh","Line","Points","frustumCulled","intersectsObject","addObject","Sprite","intersectsSprite","children","l","getNextObjectInPool","setFromMatrixPosition","pushPoint","getNextSpriteInPool","abs","projectionMatrix","face","line","painterSort","s1","s2","alpha1","alpha2","bc1near","bc2near","bc1far","bc2far","min","lerp","projectScene","scene","sortObjects","sortElements","autoUpdate","updateMatrixWorld","parent","matrixWorldInverse","multiplyMatrices","setFromMatrix","sort","o","ol","geometry","BufferGeometry","isMultiMaterial","isArray","attributes","groups","undefined","positions","array","morphTargets","morphAttributes","morphInfluences","morphTargetInfluences","t","tl","influence","target","getX","getY","getZ","index","indices","group","materialIndex","start","count","Geometry","vertices","faces","faceVertexUvs","v","vl","targetVertex","f","fl","FrontSide","BackSide","negate","faceVertexNormals","vertexNormals","n","nl","vertexUvs","u","step","LineSegments","modelViewMatrix","toObject","toAbsoluteIndex","toLength","module","exports","O","argumentsLength","end","endPos","$","addToUnscopables","proto","render","_vm","_h","$createElement","_self","_c","_m","staticRenderFns","attrs","_v","component"],"mappings":"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","file":"js/chunk-14a81074.9cbe8de0.js","sourcesContent":["export default function(color = '#fff', spriteSize = 8) {\n  const PI2 = Math.PI * 2;\n  const canvas = document.createElement('canvas');\n  const ctx = canvas.getContext('2d');\n\n  canvas.width = canvas.height = spriteSize * 2;\n  ctx.fillStyle = color;\n  ctx.beginPath();\n  ctx.arc(spriteSize, spriteSize, spriteSize, 0, PI2, true);\n  ctx.fill();\n\n  const sprite = new THREE.Texture(canvas);\n  sprite.needsUpdate = true;\n\n  return sprite;\n}\n","/**\n * @author mrdoob / http://mrdoob.com/\n * @author supereggbert / http://www.paulbrunt.co.uk/\n * @author julianwa / https://github.com/julianwa\n */\n\nTHREE.RenderableObject = function () {\n\n\tthis.id = 0;\n\n\tthis.object = null;\n\tthis.z = 0;\n\tthis.renderOrder = 0;\n\n};\n\n//\n\nTHREE.RenderableFace = function () {\n\n\tthis.id = 0;\n\n\tthis.v1 = new THREE.RenderableVertex();\n\tthis.v2 = new THREE.RenderableVertex();\n\tthis.v3 = new THREE.RenderableVertex();\n\n\tthis.normalModel = new THREE.Vector3();\n\n\tthis.vertexNormalsModel = [ new THREE.Vector3(), new THREE.Vector3(), new THREE.Vector3() ];\n\tthis.vertexNormalsLength = 0;\n\n\tthis.color = new THREE.Color();\n\tthis.material = null;\n\tthis.uvs = [ new THREE.Vector2(), new THREE.Vector2(), new THREE.Vector2() ];\n\n\tthis.z = 0;\n\tthis.renderOrder = 0;\n\n};\n\n//\n\nTHREE.RenderableVertex = function () {\n\n\tthis.position = new THREE.Vector3();\n\tthis.positionWorld = new THREE.Vector3();\n\tthis.positionScreen = new THREE.Vector4();\n\n\tthis.visible = true;\n\n};\n\nTHREE.RenderableVertex.prototype.copy = function ( vertex ) {\n\n\tthis.positionWorld.copy( vertex.positionWorld );\n\tthis.positionScreen.copy( vertex.positionScreen );\n\n};\n\n//\n\nTHREE.RenderableLine = function () {\n\n\tthis.id = 0;\n\n\tthis.v1 = new THREE.RenderableVertex();\n\tthis.v2 = new THREE.RenderableVertex();\n\n\tthis.vertexColors = [ new THREE.Color(), new THREE.Color() ];\n\tthis.material = null;\n\n\tthis.z = 0;\n\tthis.renderOrder = 0;\n\n};\n\n//\n\nTHREE.RenderableSprite = function () {\n\n\tthis.id = 0;\n\n\tthis.object = null;\n\n\tthis.x = 0;\n\tthis.y = 0;\n\tthis.z = 0;\n\n\tthis.rotation = 0;\n\tthis.scale = new THREE.Vector2();\n\n\tthis.material = null;\n\tthis.renderOrder = 0;\n\n};\n\n//\n\nTHREE.Projector = function () {\n\n\tvar _object, _objectCount, _objectPool = [], _objectPoolLength = 0,\n\t\t_vertex, _vertexCount, _vertexPool = [], _vertexPoolLength = 0,\n\t\t_face, _faceCount, _facePool = [], _facePoolLength = 0,\n\t\t_line, _lineCount, _linePool = [], _linePoolLength = 0,\n\t\t_sprite, _spriteCount, _spritePool = [], _spritePoolLength = 0,\n\n\t\t_renderData = { objects: [], lights: [], elements: [] },\n\n\t\t_vector3 = new THREE.Vector3(),\n\t\t_vector4 = new THREE.Vector4(),\n\n\t\t_clipBox = new THREE.Box3( new THREE.Vector3( - 1, - 1, - 1 ), new THREE.Vector3( 1, 1, 1 ) ),\n\t\t_boundingBox = new THREE.Box3(),\n\t\t_points3 = new Array( 3 ),\n\n\t\t_viewMatrix = new THREE.Matrix4(),\n\t\t_viewProjectionMatrix = new THREE.Matrix4(),\n\n\t\t_modelMatrix,\n\t\t_modelViewProjectionMatrix = new THREE.Matrix4(),\n\n\t\t_normalMatrix = new THREE.Matrix3(),\n\n\t\t_frustum = new THREE.Frustum(),\n\n\t\t_clippedVertex1PositionScreen = new THREE.Vector4(),\n\t\t_clippedVertex2PositionScreen = new THREE.Vector4();\n\n\t//\n\n\tthis.projectVector = function ( vector, camera ) {\n\n\t\tconsole.warn( 'THREE.Projector: .projectVector() is now vector.project().' );\n\t\tvector.project( camera );\n\n\t};\n\n\tthis.unprojectVector = function ( vector, camera ) {\n\n\t\tconsole.warn( 'THREE.Projector: .unprojectVector() is now vector.unproject().' );\n\t\tvector.unproject( camera );\n\n\t};\n\n\tthis.pickingRay = function () {\n\n\t\tconsole.error( 'THREE.Projector: .pickingRay() is now raycaster.setFromCamera().' );\n\n\t};\n\n\t//\n\n\tvar RenderList = function () {\n\n\t\tvar normals = [];\n\t\tvar colors = [];\n\t\tvar uvs = [];\n\n\t\tvar object = null;\n\t\tvar material = null;\n\n\t\tvar normalMatrix = new THREE.Matrix3();\n\n\t\tfunction setObject( value ) {\n\n\t\t\tobject = value;\n\t\t\tmaterial = object.material;\n\n\t\t\tnormalMatrix.getNormalMatrix( object.matrixWorld );\n\n\t\t\tnormals.length = 0;\n\t\t\tcolors.length = 0;\n\t\t\tuvs.length = 0;\n\n\t\t}\n\n\t\tfunction projectVertex( vertex ) {\n\n\t\t\tvar position = vertex.position;\n\t\t\tvar positionWorld = vertex.positionWorld;\n\t\t\tvar positionScreen = vertex.positionScreen;\n\n\t\t\tpositionWorld.copy( position ).applyMatrix4( _modelMatrix );\n\t\t\tpositionScreen.copy( positionWorld ).applyMatrix4( _viewProjectionMatrix );\n\n\t\t\tvar invW = 1 / positionScreen.w;\n\n\t\t\tpositionScreen.x *= invW;\n\t\t\tpositionScreen.y *= invW;\n\t\t\tpositionScreen.z *= invW;\n\n\t\t\tvertex.visible = positionScreen.x >= - 1 && positionScreen.x <= 1 &&\n\t\t\t\t\t positionScreen.y >= - 1 && positionScreen.y <= 1 &&\n\t\t\t\t\t positionScreen.z >= - 1 && positionScreen.z <= 1;\n\n\t\t}\n\n\t\tfunction pushVertex( x, y, z ) {\n\n\t\t\t_vertex = getNextVertexInPool();\n\t\t\t_vertex.position.set( x, y, z );\n\n\t\t\tprojectVertex( _vertex );\n\n\t\t}\n\n\t\tfunction pushNormal( x, y, z ) {\n\n\t\t\tnormals.push( x, y, z );\n\n\t\t}\n\n\t\tfunction pushColor( r, g, b ) {\n\n\t\t\tcolors.push( r, g, b );\n\n\t\t}\n\n\t\tfunction pushUv( x, y ) {\n\n\t\t\tuvs.push( x, y );\n\n\t\t}\n\n\t\tfunction checkTriangleVisibility( v1, v2, v3 ) {\n\n\t\t\tif ( v1.visible === true || v2.visible === true || v3.visible === true ) return true;\n\n\t\t\t_points3[ 0 ] = v1.positionScreen;\n\t\t\t_points3[ 1 ] = v2.positionScreen;\n\t\t\t_points3[ 2 ] = v3.positionScreen;\n\n\t\t\treturn _clipBox.intersectsBox( _boundingBox.setFromPoints( _points3 ) );\n\n\t\t}\n\n\t\tfunction checkBackfaceCulling( v1, v2, v3 ) {\n\n\t\t\treturn ( ( v3.positionScreen.x - v1.positionScreen.x ) *\n\t\t\t\t    ( v2.positionScreen.y - v1.positionScreen.y ) -\n\t\t\t\t    ( v3.positionScreen.y - v1.positionScreen.y ) *\n\t\t\t\t    ( v2.positionScreen.x - v1.positionScreen.x ) ) < 0;\n\n\t\t}\n\n\t\tfunction pushLine( a, b ) {\n\n\t\t\tvar v1 = _vertexPool[ a ];\n\t\t\tvar v2 = _vertexPool[ b ];\n\n\t\t\t// Clip\n\n\t\t\tv1.positionScreen.copy( v1.position ).applyMatrix4( _modelViewProjectionMatrix );\n\t\t\tv2.positionScreen.copy( v2.position ).applyMatrix4( _modelViewProjectionMatrix );\n\n\t\t\tif ( clipLine( v1.positionScreen, v2.positionScreen ) === true ) {\n\n\t\t\t\t// Perform the perspective divide\n\t\t\t\tv1.positionScreen.multiplyScalar( 1 / v1.positionScreen.w );\n\t\t\t\tv2.positionScreen.multiplyScalar( 1 / v2.positionScreen.w );\n\n\t\t\t\t_line = getNextLineInPool();\n\t\t\t\t_line.id = object.id;\n\t\t\t\t_line.v1.copy( v1 );\n\t\t\t\t_line.v2.copy( v2 );\n\t\t\t\t_line.z = Math.max( v1.positionScreen.z, v2.positionScreen.z );\n\t\t\t\t_line.renderOrder = object.renderOrder;\n\n\t\t\t\t_line.material = object.material;\n\n\t\t\t\tif ( object.material.vertexColors === THREE.VertexColors ) {\n\n\t\t\t\t\t_line.vertexColors[ 0 ].fromArray( colors, a * 3 );\n\t\t\t\t\t_line.vertexColors[ 1 ].fromArray( colors, b * 3 );\n\n\t\t\t\t}\n\n\t\t\t\t_renderData.elements.push( _line );\n\n\t\t\t}\n\n\t\t}\n\n\t\tfunction pushTriangle( a, b, c, material ) {\n\n\t\t\tvar v1 = _vertexPool[ a ];\n\t\t\tvar v2 = _vertexPool[ b ];\n\t\t\tvar v3 = _vertexPool[ c ];\n\n\t\t\tif ( checkTriangleVisibility( v1, v2, v3 ) === false ) return;\n\n\t\t\tif ( material.side === THREE.DoubleSide || checkBackfaceCulling( v1, v2, v3 ) === true ) {\n\n\t\t\t\t_face = getNextFaceInPool();\n\n\t\t\t\t_face.id = object.id;\n\t\t\t\t_face.v1.copy( v1 );\n\t\t\t\t_face.v2.copy( v2 );\n\t\t\t\t_face.v3.copy( v3 );\n\t\t\t\t_face.z = ( v1.positionScreen.z + v2.positionScreen.z + v3.positionScreen.z ) / 3;\n\t\t\t\t_face.renderOrder = object.renderOrder;\n\n\t\t\t\t// face normal\n\t\t\t\t_vector3.subVectors( v3.position, v2.position );\n\t\t\t\t_vector4.subVectors( v1.position, v2.position );\n\t\t\t\t_vector3.cross( _vector4 );\n\t\t\t\t_face.normalModel.copy( _vector3 );\n\t\t\t\t_face.normalModel.applyMatrix3( normalMatrix ).normalize();\n\n\t\t\t\tfor ( var i = 0; i < 3; i ++ ) {\n\n\t\t\t\t\tvar normal = _face.vertexNormalsModel[ i ];\n\t\t\t\t\tnormal.fromArray( normals, arguments[ i ] * 3 );\n\t\t\t\t\tnormal.applyMatrix3( normalMatrix ).normalize();\n\n\t\t\t\t\tvar uv = _face.uvs[ i ];\n\t\t\t\t\tuv.fromArray( uvs, arguments[ i ] * 2 );\n\n\t\t\t\t}\n\n\t\t\t\t_face.vertexNormalsLength = 3;\n\n\t\t\t\t_face.material = material;\n\n\t\t\t\tif ( material.vertexColors === THREE.FaceColors ||  material.vertexColors === THREE.VertexColors ) {\n\n\t\t\t\t\t_face.color.fromArray( colors, a * 3 );\n\n\t\t\t\t}\n\n\t\t\t\t_renderData.elements.push( _face );\n\n\t\t\t}\n\n\t\t}\n\n\t\treturn {\n\t\t\tsetObject: setObject,\n\t\t\tprojectVertex: projectVertex,\n\t\t\tcheckTriangleVisibility: checkTriangleVisibility,\n\t\t\tcheckBackfaceCulling: checkBackfaceCulling,\n\t\t\tpushVertex: pushVertex,\n\t\t\tpushNormal: pushNormal,\n\t\t\tpushColor: pushColor,\n\t\t\tpushUv: pushUv,\n\t\t\tpushLine: pushLine,\n\t\t\tpushTriangle: pushTriangle\n\t\t};\n\n\t};\n\n\tvar renderList = new RenderList();\n\n\tfunction projectObject( object ) {\n\n\t\tif ( object.visible === false ) return;\n\n\t\tif ( object instanceof THREE.Light ) {\n\n\t\t\t_renderData.lights.push( object );\n\n\t\t} else if ( object instanceof THREE.Mesh || object instanceof THREE.Line || object instanceof THREE.Points ) {\n\n\t\t\tif ( object.material.visible === false ) return;\n\t\t\tif ( object.frustumCulled === true && _frustum.intersectsObject( object ) === false ) return;\n\n\t\t\taddObject( object );\n\n\t\t} else if ( object instanceof THREE.Sprite ) {\n\n\t\t\tif ( object.material.visible === false ) return;\n\t\t\tif ( object.frustumCulled === true && _frustum.intersectsSprite( object ) === false ) return;\n\n\t\t\taddObject( object );\n\n\t\t}\n\n\t\tvar children = object.children;\n\n\t\tfor ( var i = 0, l = children.length; i < l; i ++ ) {\n\n\t\t\tprojectObject( children[ i ] );\n\n\t\t}\n\n\t}\n\n\tfunction addObject( object ) {\n\n\t\t_object = getNextObjectInPool();\n\t\t_object.id = object.id;\n\t\t_object.object = object;\n\n\t\t_vector3.setFromMatrixPosition( object.matrixWorld );\n\t\t_vector3.applyMatrix4( _viewProjectionMatrix );\n\t\t_object.z = _vector3.z;\n\t\t_object.renderOrder = object.renderOrder;\n\n\t\t_renderData.objects.push( _object );\n\n\t}\n\n\tthis.projectScene = function ( scene, camera, sortObjects, sortElements ) {\n\n\t\t_faceCount = 0;\n\t\t_lineCount = 0;\n\t\t_spriteCount = 0;\n\n\t\t_renderData.elements.length = 0;\n\n\t\tif ( scene.autoUpdate === true ) scene.updateMatrixWorld();\n\t\tif ( camera.parent === null ) camera.updateMatrixWorld();\n\n\t\t_viewMatrix.copy( camera.matrixWorldInverse );\n\t\t_viewProjectionMatrix.multiplyMatrices( camera.projectionMatrix, _viewMatrix );\n\n\t\t_frustum.setFromMatrix( _viewProjectionMatrix );\n\n\t\t//\n\n\t\t_objectCount = 0;\n\n\t\t_renderData.objects.length = 0;\n\t\t_renderData.lights.length = 0;\n\n\t\tprojectObject( scene );\n\n\t\tif ( sortObjects === true ) {\n\n\t\t\t_renderData.objects.sort( painterSort );\n\n\t\t}\n\n\t\t//\n\n\t\tvar objects = _renderData.objects;\n\n\t\tfor ( var o = 0, ol = objects.length; o < ol; o ++ ) {\n\n\t\t\tvar object = objects[ o ].object;\n\t\t\tvar geometry = object.geometry;\n\n\t\t\trenderList.setObject( object );\n\n\t\t\t_modelMatrix = object.matrixWorld;\n\n\t\t\t_vertexCount = 0;\n\n\t\t\tif ( object instanceof THREE.Mesh ) {\n\n\t\t\t\tif ( geometry instanceof THREE.BufferGeometry ) {\n\n\t\t\t\t\tvar material = object.material;\n\n\t\t\t\t\tvar isMultiMaterial = Array.isArray( material );\n\n\t\t\t\t\tvar attributes = geometry.attributes;\n\t\t\t\t\tvar groups = geometry.groups;\n\n\t\t\t\t\tif ( attributes.position === undefined ) continue;\n\n\t\t\t\t\tvar positions = attributes.position.array;\n\n\t\t\t\t\tfor ( var i = 0, l = positions.length; i < l; i += 3 ) {\n\n\t\t\t\t\t\tvar x = positions[ i ];\n\t\t\t\t\t\tvar y = positions[ i + 1 ];\n\t\t\t\t\t\tvar z = positions[ i + 2 ];\n\n\t\t\t\t\t\tif ( material.morphTargets === true ) {\n\n\t\t\t\t\t\t\tvar morphTargets = geometry.morphAttributes.position;\n\t\t\t\t\t\t\tvar morphInfluences = object.morphTargetInfluences;\n\n\t\t\t\t\t\t\tfor ( var t = 0, tl = morphTargets.length; t < tl; t ++ ) {\n\n\t\t\t\t\t\t\t\tvar influence = morphInfluences[ t ];\n\n\t\t\t\t\t\t\t\tif ( influence === 0 ) continue;\n\n\t\t\t\t\t\t\t\tvar target = morphTargets[ t ];\n\n\t\t\t\t\t\t\t\tx += ( target.getX( i / 3 ) - positions[ i ] ) * influence;\n\t\t\t\t\t\t\t\ty += ( target.getY( i / 3 ) - positions[ i + 1 ] ) * influence;\n\t\t\t\t\t\t\t\tz += ( target.getZ( i / 3 ) - positions[ i + 2 ] ) * influence;\n\n\t\t\t\t\t\t\t}\n\n\t\t\t\t\t\t}\n\n\t\t\t\t\t\trenderList.pushVertex( x, y, z );\n\n\t\t\t\t\t}\n\n\t\t\t\t\tif ( attributes.normal !== undefined ) {\n\n\t\t\t\t\t\tvar normals = attributes.normal.array;\n\n\t\t\t\t\t\tfor ( var i = 0, l = normals.length; i < l; i += 3 ) {\n\n\t\t\t\t\t\t\trenderList.pushNormal( normals[ i ], normals[ i + 1 ], normals[ i + 2 ] );\n\n\t\t\t\t\t\t}\n\n\t\t\t\t\t}\n\n\t\t\t\t\tif ( attributes.color !== undefined ) {\n\n\t\t\t\t\t\tvar colors = attributes.color.array;\n\n\t\t\t\t\t\tfor ( var i = 0, l = colors.length; i < l; i += 3 ) {\n\n\t\t\t\t\t\t\trenderList.pushColor( colors[ i ], colors[ i + 1 ], colors[ i + 2 ] );\n\n\t\t\t\t\t\t}\n\n\t\t\t\t\t}\n\n\t\t\t\t\tif ( attributes.uv !== undefined ) {\n\n\t\t\t\t\t\tvar uvs = attributes.uv.array;\n\n\t\t\t\t\t\tfor ( var i = 0, l = uvs.length; i < l; i += 2 ) {\n\n\t\t\t\t\t\t\trenderList.pushUv( uvs[ i ], uvs[ i + 1 ] );\n\n\t\t\t\t\t\t}\n\n\t\t\t\t\t}\n\n\t\t\t\t\tif ( geometry.index !== null ) {\n\n\t\t\t\t\t\tvar indices = geometry.index.array;\n\n\t\t\t\t\t\tif ( groups.length > 0 ) {\n\n\t\t\t\t\t\t\tfor ( var g = 0; g < groups.length; g ++ ) {\n\n\t\t\t\t\t\t\t\tvar group = groups[ g ];\n\n\t\t\t\t\t\t\t\tmaterial = isMultiMaterial === true\n\t\t\t\t\t\t\t\t\t ? object.material[ group.materialIndex ]\n\t\t\t\t\t\t\t\t\t : object.material;\n\n\t\t\t\t\t\t\t\tif ( material === undefined ) continue;\n\n\t\t\t\t\t\t\t\tfor ( var i = group.start, l = group.start + group.count; i < l; i += 3 ) {\n\n\t\t\t\t\t\t\t\t\trenderList.pushTriangle( indices[ i ], indices[ i + 1 ], indices[ i + 2 ], material );\n\n\t\t\t\t\t\t\t\t}\n\n\t\t\t\t\t\t\t}\n\n\t\t\t\t\t\t} else {\n\n\t\t\t\t\t\t\tfor ( var i = 0, l = indices.length; i < l; i += 3 ) {\n\n\t\t\t\t\t\t\t\trenderList.pushTriangle( indices[ i ], indices[ i + 1 ], indices[ i + 2 ], material );\n\n\t\t\t\t\t\t\t}\n\n\t\t\t\t\t\t}\n\n\t\t\t\t\t} else {\n\n\t\t\t\t\t\tif ( groups.length > 0 ) {\n\n\t\t\t\t\t\t\tfor ( var g = 0; g < groups.length; g ++ ) {\n\n\t\t\t\t\t\t\t\tvar group = groups[ g ];\n\n\t\t\t\t\t\t\t\tmaterial = isMultiMaterial === true\n\t\t\t\t\t\t\t\t\t ? object.material[ group.materialIndex ]\n\t\t\t\t\t\t\t\t\t : object.material;\n\n\t\t\t\t\t\t\t\tif ( material === undefined ) continue;\n\n\t\t\t\t\t\t\t\tfor ( var i = group.start, l = group.start + group.count; i < l; i += 3 ) {\n\n\t\t\t\t\t\t\t\t\trenderList.pushTriangle( i, i + 1, i + 2, material );\n\n\t\t\t\t\t\t\t\t}\n\n\t\t\t\t\t\t\t}\n\n\t\t\t\t\t\t} else {\n\n\t\t\t\t\t\t\tfor ( var i = 0, l = positions.length / 3; i < l; i += 3 ) {\n\n\t\t\t\t\t\t\t\trenderList.pushTriangle( i, i + 1, i + 2, material );\n\n\t\t\t\t\t\t\t}\n\n\t\t\t\t\t\t}\n\n\t\t\t\t\t}\n\n\t\t\t\t} else if ( geometry instanceof THREE.Geometry ) {\n\n\t\t\t\t\tvar vertices = geometry.vertices;\n\t\t\t\t\tvar faces = geometry.faces;\n\t\t\t\t\tvar faceVertexUvs = geometry.faceVertexUvs[ 0 ];\n\n\t\t\t\t\t_normalMatrix.getNormalMatrix( _modelMatrix );\n\n\t\t\t\t\tvar material = object.material;\n\n\t\t\t\t\tvar isMultiMaterial = Array.isArray( material );\n\n\t\t\t\t\tfor ( var v = 0, vl = vertices.length; v < vl; v ++ ) {\n\n\t\t\t\t\t\tvar vertex = vertices[ v ];\n\n\t\t\t\t\t\t_vector3.copy( vertex );\n\n\t\t\t\t\t\tif ( material.morphTargets === true ) {\n\n\t\t\t\t\t\t\tvar morphTargets = geometry.morphTargets;\n\t\t\t\t\t\t\tvar morphInfluences = object.morphTargetInfluences;\n\n\t\t\t\t\t\t\tfor ( var t = 0, tl = morphTargets.length; t < tl; t ++ ) {\n\n\t\t\t\t\t\t\t\tvar influence = morphInfluences[ t ];\n\n\t\t\t\t\t\t\t\tif ( influence === 0 ) continue;\n\n\t\t\t\t\t\t\t\tvar target = morphTargets[ t ];\n\t\t\t\t\t\t\t\tvar targetVertex = target.vertices[ v ];\n\n\t\t\t\t\t\t\t\t_vector3.x += ( targetVertex.x - vertex.x ) * influence;\n\t\t\t\t\t\t\t\t_vector3.y += ( targetVertex.y - vertex.y ) * influence;\n\t\t\t\t\t\t\t\t_vector3.z += ( targetVertex.z - vertex.z ) * influence;\n\n\t\t\t\t\t\t\t}\n\n\t\t\t\t\t\t}\n\n\t\t\t\t\t\trenderList.pushVertex( _vector3.x, _vector3.y, _vector3.z );\n\n\t\t\t\t\t}\n\n\t\t\t\t\tfor ( var f = 0, fl = faces.length; f < fl; f ++ ) {\n\n\t\t\t\t\t\tvar face = faces[ f ];\n\n\t\t\t\t\t\tmaterial = isMultiMaterial === true\n\t\t\t\t\t\t\t ? object.material[ face.materialIndex ]\n\t\t\t\t\t\t\t : object.material;\n\n\t\t\t\t\t\tif ( material === undefined ) continue;\n\n\t\t\t\t\t\tvar side = material.side;\n\n\t\t\t\t\t\tvar v1 = _vertexPool[ face.a ];\n\t\t\t\t\t\tvar v2 = _vertexPool[ face.b ];\n\t\t\t\t\t\tvar v3 = _vertexPool[ face.c ];\n\n\t\t\t\t\t\tif ( renderList.checkTriangleVisibility( v1, v2, v3 ) === false ) continue;\n\n\t\t\t\t\t\tvar visible = renderList.checkBackfaceCulling( v1, v2, v3 );\n\n\t\t\t\t\t\tif ( side !== THREE.DoubleSide ) {\n\n\t\t\t\t\t\t\tif ( side === THREE.FrontSide && visible === false ) continue;\n\t\t\t\t\t\t\tif ( side === THREE.BackSide && visible === true ) continue;\n\n\t\t\t\t\t\t}\n\n\t\t\t\t\t\t_face = getNextFaceInPool();\n\n\t\t\t\t\t\t_face.id = object.id;\n\t\t\t\t\t\t_face.v1.copy( v1 );\n\t\t\t\t\t\t_face.v2.copy( v2 );\n\t\t\t\t\t\t_face.v3.copy( v3 );\n\n\t\t\t\t\t\t_face.normalModel.copy( face.normal );\n\n\t\t\t\t\t\tif ( visible === false && ( side === THREE.BackSide || side === THREE.DoubleSide ) ) {\n\n\t\t\t\t\t\t\t_face.normalModel.negate();\n\n\t\t\t\t\t\t}\n\n\t\t\t\t\t\t_face.normalModel.applyMatrix3( _normalMatrix ).normalize();\n\n\t\t\t\t\t\tvar faceVertexNormals = face.vertexNormals;\n\n\t\t\t\t\t\tfor ( var n = 0, nl = Math.min( faceVertexNormals.length, 3 ); n < nl; n ++ ) {\n\n\t\t\t\t\t\t\tvar normalModel = _face.vertexNormalsModel[ n ];\n\t\t\t\t\t\t\tnormalModel.copy( faceVertexNormals[ n ] );\n\n\t\t\t\t\t\t\tif ( visible === false && ( side === THREE.BackSide || side === THREE.DoubleSide ) ) {\n\n\t\t\t\t\t\t\t\tnormalModel.negate();\n\n\t\t\t\t\t\t\t}\n\n\t\t\t\t\t\t\tnormalModel.applyMatrix3( _normalMatrix ).normalize();\n\n\t\t\t\t\t\t}\n\n\t\t\t\t\t\t_face.vertexNormalsLength = faceVertexNormals.length;\n\n\t\t\t\t\t\tvar vertexUvs = faceVertexUvs[ f ];\n\n\t\t\t\t\t\tif ( vertexUvs !== undefined ) {\n\n\t\t\t\t\t\t\tfor ( var u = 0; u < 3; u ++ ) {\n\n\t\t\t\t\t\t\t\t_face.uvs[ u ].copy( vertexUvs[ u ] );\n\n\t\t\t\t\t\t\t}\n\n\t\t\t\t\t\t}\n\n\t\t\t\t\t\t_face.color = face.color;\n\t\t\t\t\t\t_face.material = material;\n\n\t\t\t\t\t\t_face.z = ( v1.positionScreen.z + v2.positionScreen.z + v3.positionScreen.z ) / 3;\n\t\t\t\t\t\t_face.renderOrder = object.renderOrder;\n\n\t\t\t\t\t\t_renderData.elements.push( _face );\n\n\t\t\t\t\t}\n\n\t\t\t\t}\n\n\t\t\t} else if ( object instanceof THREE.Line ) {\n\n\t\t\t\t_modelViewProjectionMatrix.multiplyMatrices( _viewProjectionMatrix, _modelMatrix );\n\n\t\t\t\tif ( geometry instanceof THREE.BufferGeometry ) {\n\n\t\t\t\t\tvar attributes = geometry.attributes;\n\n\t\t\t\t\tif ( attributes.position !== undefined ) {\n\n\t\t\t\t\t\tvar positions = attributes.position.array;\n\n\t\t\t\t\t\tfor ( var i = 0, l = positions.length; i < l; i += 3 ) {\n\n\t\t\t\t\t\t\trenderList.pushVertex( positions[ i ], positions[ i + 1 ], positions[ i + 2 ] );\n\n\t\t\t\t\t\t}\n\n\t\t\t\t\t\tif ( attributes.color !== undefined ) {\n\n\t\t\t\t\t\t\tvar colors = attributes.color.array;\n\n\t\t\t\t\t\t\tfor ( var i = 0, l = colors.length; i < l; i += 3 ) {\n\n\t\t\t\t\t\t\t\trenderList.pushColor( colors[ i ], colors[ i + 1 ], colors[ i + 2 ] );\n\n\t\t\t\t\t\t\t}\n\n\t\t\t\t\t\t}\n\n\t\t\t\t\t\tif ( geometry.index !== null ) {\n\n\t\t\t\t\t\t\tvar indices = geometry.index.array;\n\n\t\t\t\t\t\t\tfor ( var i = 0, l = indices.length; i < l; i += 2 ) {\n\n\t\t\t\t\t\t\t\trenderList.pushLine( indices[ i ], indices[ i + 1 ] );\n\n\t\t\t\t\t\t\t}\n\n\t\t\t\t\t\t} else {\n\n\t\t\t\t\t\t\tvar step = object instanceof THREE.LineSegments ? 2 : 1;\n\n\t\t\t\t\t\t\tfor ( var i = 0, l = ( positions.length / 3 ) - 1; i < l; i += step ) {\n\n\t\t\t\t\t\t\t\trenderList.pushLine( i, i + 1 );\n\n\t\t\t\t\t\t\t}\n\n\t\t\t\t\t\t}\n\n\t\t\t\t\t}\n\n\t\t\t\t} else if ( geometry instanceof THREE.Geometry ) {\n\n\t\t\t\t\tvar vertices = object.geometry.vertices;\n\n\t\t\t\t\tif ( vertices.length === 0 ) continue;\n\n\t\t\t\t\tv1 = getNextVertexInPool();\n\t\t\t\t\tv1.positionScreen.copy( vertices[ 0 ] ).applyMatrix4( _modelViewProjectionMatrix );\n\n\t\t\t\t\tvar step = object instanceof THREE.LineSegments ? 2 : 1;\n\n\t\t\t\t\tfor ( var v = 1, vl = vertices.length; v < vl; v ++ ) {\n\n\t\t\t\t\t\tv1 = getNextVertexInPool();\n\t\t\t\t\t\tv1.positionScreen.copy( vertices[ v ] ).applyMatrix4( _modelViewProjectionMatrix );\n\n\t\t\t\t\t\tif ( ( v + 1 ) % step > 0 ) continue;\n\n\t\t\t\t\t\tv2 = _vertexPool[ _vertexCount - 2 ];\n\n\t\t\t\t\t\t_clippedVertex1PositionScreen.copy( v1.positionScreen );\n\t\t\t\t\t\t_clippedVertex2PositionScreen.copy( v2.positionScreen );\n\n\t\t\t\t\t\tif ( clipLine( _clippedVertex1PositionScreen, _clippedVertex2PositionScreen ) === true ) {\n\n\t\t\t\t\t\t\t// Perform the perspective divide\n\t\t\t\t\t\t\t_clippedVertex1PositionScreen.multiplyScalar( 1 / _clippedVertex1PositionScreen.w );\n\t\t\t\t\t\t\t_clippedVertex2PositionScreen.multiplyScalar( 1 / _clippedVertex2PositionScreen.w );\n\n\t\t\t\t\t\t\t_line = getNextLineInPool();\n\n\t\t\t\t\t\t\t_line.id = object.id;\n\t\t\t\t\t\t\t_line.v1.positionScreen.copy( _clippedVertex1PositionScreen );\n\t\t\t\t\t\t\t_line.v2.positionScreen.copy( _clippedVertex2PositionScreen );\n\n\t\t\t\t\t\t\t_line.z = Math.max( _clippedVertex1PositionScreen.z, _clippedVertex2PositionScreen.z );\n\t\t\t\t\t\t\t_line.renderOrder = object.renderOrder;\n\n\t\t\t\t\t\t\t_line.material = object.material;\n\n\t\t\t\t\t\t\tif ( object.material.vertexColors === THREE.VertexColors ) {\n\n\t\t\t\t\t\t\t\t_line.vertexColors[ 0 ].copy( object.geometry.colors[ v ] );\n\t\t\t\t\t\t\t\t_line.vertexColors[ 1 ].copy( object.geometry.colors[ v - 1 ] );\n\n\t\t\t\t\t\t\t}\n\n\t\t\t\t\t\t\t_renderData.elements.push( _line );\n\n\t\t\t\t\t\t}\n\n\t\t\t\t\t}\n\n\t\t\t\t}\n\n\t\t\t} else if ( object instanceof THREE.Points ) {\n\n\t\t\t\t_modelViewProjectionMatrix.multiplyMatrices( _viewProjectionMatrix, _modelMatrix );\n\n\t\t\t\tif ( geometry instanceof THREE.Geometry ) {\n\n\t\t\t\t\tvar vertices = object.geometry.vertices;\n\n\t\t\t\t\tfor ( var v = 0, vl = vertices.length; v < vl; v ++ ) {\n\n\t\t\t\t\t\tvar vertex = vertices[ v ];\n\n\t\t\t\t\t\t_vector4.set( vertex.x, vertex.y, vertex.z, 1 );\n\t\t\t\t\t\t_vector4.applyMatrix4( _modelViewProjectionMatrix );\n\n\t\t\t\t\t\tpushPoint( _vector4, object, camera );\n\n\t\t\t\t\t}\n\n\t\t\t\t} else if ( geometry instanceof THREE.BufferGeometry ) {\n\n\t\t\t\t\tvar attributes = geometry.attributes;\n\n\t\t\t\t\tif ( attributes.position !== undefined ) {\n\n\t\t\t\t\t\tvar positions = attributes.position.array;\n\n\t\t\t\t\t\tfor ( var i = 0, l = positions.length; i < l; i += 3 ) {\n\n\t\t\t\t\t\t\t_vector4.set( positions[ i ], positions[ i + 1 ], positions[ i + 2 ], 1 );\n\t\t\t\t\t\t\t_vector4.applyMatrix4( _modelViewProjectionMatrix );\n\n\t\t\t\t\t\t\tpushPoint( _vector4, object, camera );\n\n\t\t\t\t\t\t}\n\n\t\t\t\t\t}\n\n\t\t\t\t}\n\n\t\t\t} else if ( object instanceof THREE.Sprite ) {\n\n\t\t\t\tobject.modelViewMatrix.multiplyMatrices( camera.matrixWorldInverse, object.matrixWorld );\n\t\t\t\t_vector4.set( _modelMatrix.elements[ 12 ], _modelMatrix.elements[ 13 ], _modelMatrix.elements[ 14 ], 1 );\n\t\t\t\t_vector4.applyMatrix4( _viewProjectionMatrix );\n\n\t\t\t\tpushPoint( _vector4, object, camera );\n\n\t\t\t}\n\n\t\t}\n\n\t\tif ( sortElements === true ) {\n\n\t\t\t_renderData.elements.sort( painterSort );\n\n\t\t}\n\n\t\treturn _renderData;\n\n\t};\n\n\tfunction pushPoint( _vector4, object, camera ) {\n\n\t\tvar invW = 1 / _vector4.w;\n\n\t\t_vector4.z *= invW;\n\n\t\tif ( _vector4.z >= - 1 && _vector4.z <= 1 ) {\n\n\t\t\t_sprite = getNextSpriteInPool();\n\t\t\t_sprite.id = object.id;\n\t\t\t_sprite.x = _vector4.x * invW;\n\t\t\t_sprite.y = _vector4.y * invW;\n\t\t\t_sprite.z = _vector4.z;\n\t\t\t_sprite.renderOrder = object.renderOrder;\n\t\t\t_sprite.object = object;\n\n\t\t\t_sprite.rotation = object.rotation;\n\n\t\t\t_sprite.scale.x = object.scale.x * Math.abs( _sprite.x - ( _vector4.x + camera.projectionMatrix.elements[ 0 ] ) / ( _vector4.w + camera.projectionMatrix.elements[ 12 ] ) );\n\t\t\t_sprite.scale.y = object.scale.y * Math.abs( _sprite.y - ( _vector4.y + camera.projectionMatrix.elements[ 5 ] ) / ( _vector4.w + camera.projectionMatrix.elements[ 13 ] ) );\n\n\t\t\t_sprite.material = object.material;\n\n\t\t\t_renderData.elements.push( _sprite );\n\n\t\t}\n\n\t}\n\n\t// Pools\n\n\tfunction getNextObjectInPool() {\n\n\t\tif ( _objectCount === _objectPoolLength ) {\n\n\t\t\tvar object = new THREE.RenderableObject();\n\t\t\t_objectPool.push( object );\n\t\t\t_objectPoolLength ++;\n\t\t\t_objectCount ++;\n\t\t\treturn object;\n\n\t\t}\n\n\t\treturn _objectPool[ _objectCount ++ ];\n\n\t}\n\n\tfunction getNextVertexInPool() {\n\n\t\tif ( _vertexCount === _vertexPoolLength ) {\n\n\t\t\tvar vertex = new THREE.RenderableVertex();\n\t\t\t_vertexPool.push( vertex );\n\t\t\t_vertexPoolLength ++;\n\t\t\t_vertexCount ++;\n\t\t\treturn vertex;\n\n\t\t}\n\n\t\treturn _vertexPool[ _vertexCount ++ ];\n\n\t}\n\n\tfunction getNextFaceInPool() {\n\n\t\tif ( _faceCount === _facePoolLength ) {\n\n\t\t\tvar face = new THREE.RenderableFace();\n\t\t\t_facePool.push( face );\n\t\t\t_facePoolLength ++;\n\t\t\t_faceCount ++;\n\t\t\treturn face;\n\n\t\t}\n\n\t\treturn _facePool[ _faceCount ++ ];\n\n\n\t}\n\n\tfunction getNextLineInPool() {\n\n\t\tif ( _lineCount === _linePoolLength ) {\n\n\t\t\tvar line = new THREE.RenderableLine();\n\t\t\t_linePool.push( line );\n\t\t\t_linePoolLength ++;\n\t\t\t_lineCount ++;\n\t\t\treturn line;\n\n\t\t}\n\n\t\treturn _linePool[ _lineCount ++ ];\n\n\t}\n\n\tfunction getNextSpriteInPool() {\n\n\t\tif ( _spriteCount === _spritePoolLength ) {\n\n\t\t\tvar sprite = new THREE.RenderableSprite();\n\t\t\t_spritePool.push( sprite );\n\t\t\t_spritePoolLength ++;\n\t\t\t_spriteCount ++;\n\t\t\treturn sprite;\n\n\t\t}\n\n\t\treturn _spritePool[ _spriteCount ++ ];\n\n\t}\n\n\t//\n\n\tfunction painterSort( a, b ) {\n\n\t\tif ( a.renderOrder !== b.renderOrder ) {\n\n\t\t\treturn a.renderOrder - b.renderOrder;\n\n\t\t} else if ( a.z !== b.z ) {\n\n\t\t\treturn b.z - a.z;\n\n\t\t} else if ( a.id !== b.id ) {\n\n\t\t\treturn a.id - b.id;\n\n\t\t} else {\n\n\t\t\treturn 0;\n\n\t\t}\n\n\t}\n\n\tfunction clipLine( s1, s2 ) {\n\n\t\tvar alpha1 = 0, alpha2 = 1,\n\n\t\t// Calculate the boundary coordinate of each vertex for the near and far clip planes,\n\t\t// Z = -1 and Z = +1, respectively.\n\n\t\t\tbc1near = s1.z + s1.w,\n\t\t\tbc2near = s2.z + s2.w,\n\t\t\tbc1far = - s1.z + s1.w,\n\t\t\tbc2far = - s2.z + s2.w;\n\n\t\tif ( bc1near >= 0 && bc2near >= 0 && bc1far >= 0 && bc2far >= 0 ) {\n\n\t\t\t// Both vertices lie entirely within all clip planes.\n\t\t\treturn true;\n\n\t\t} else if ( ( bc1near < 0 && bc2near < 0 ) || ( bc1far < 0 && bc2far < 0 ) ) {\n\n\t\t\t// Both vertices lie entirely outside one of the clip planes.\n\t\t\treturn false;\n\n\t\t} else {\n\n\t\t\t// The line segment spans at least one clip plane.\n\n\t\t\tif ( bc1near < 0 ) {\n\n\t\t\t\t// v1 lies outside the near plane, v2 inside\n\t\t\t\talpha1 = Math.max( alpha1, bc1near / ( bc1near - bc2near ) );\n\n\t\t\t} else if ( bc2near < 0 ) {\n\n\t\t\t\t// v2 lies outside the near plane, v1 inside\n\t\t\t\talpha2 = Math.min( alpha2, bc1near / ( bc1near - bc2near ) );\n\n\t\t\t}\n\n\t\t\tif ( bc1far < 0 ) {\n\n\t\t\t\t// v1 lies outside the far plane, v2 inside\n\t\t\t\talpha1 = Math.max( alpha1, bc1far / ( bc1far - bc2far ) );\n\n\t\t\t} else if ( bc2far < 0 ) {\n\n\t\t\t\t// v2 lies outside the far plane, v2 inside\n\t\t\t\talpha2 = Math.min( alpha2, bc1far / ( bc1far - bc2far ) );\n\n\t\t\t}\n\n\t\t\tif ( alpha2 < alpha1 ) {\n\n\t\t\t\t// The line segment spans two boundaries, but is outside both of them.\n\t\t\t\t// (This can't happen when we're only clipping against just near/far but good\n\t\t\t\t//  to leave the check here for future usage if other clip planes are added.)\n\t\t\t\treturn false;\n\n\t\t\t} else {\n\n\t\t\t\t// Update the s1 and s2 vertices to match the clipped line segment.\n\t\t\t\ts1.lerp( s2, alpha1 );\n\t\t\t\ts2.lerp( s1, 1 - alpha2 );\n\n\t\t\t\treturn true;\n\n\t\t\t}\n\n\t\t}\n\n\t}\n\n};\n","import mod from \"-!../../node_modules/mini-css-extract-plugin/dist/loader.js??ref--6-oneOf-1-0!../../node_modules/css-loader/dist/cjs.js??ref--6-oneOf-1-1!../../node_modules/vue-loader/lib/loaders/stylePostLoader.js!../../node_modules/postcss-loader/src/index.js??ref--6-oneOf-1-2!../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../node_modules/vue-loader/lib/index.js??vue-loader-options!./Lines.vue?vue&type=style&index=0&id=e1fe9fbe&scoped=true&lang=css&\"; export default mod; export * from \"-!../../node_modules/mini-css-extract-plugin/dist/loader.js??ref--6-oneOf-1-0!../../node_modules/css-loader/dist/cjs.js??ref--6-oneOf-1-1!../../node_modules/vue-loader/lib/loaders/stylePostLoader.js!../../node_modules/postcss-loader/src/index.js??ref--6-oneOf-1-2!../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../node_modules/vue-loader/lib/index.js??vue-loader-options!./Lines.vue?vue&type=style&index=0&id=e1fe9fbe&scoped=true&lang=css&\"","'use strict';\nvar toObject = require('../internals/to-object');\nvar toAbsoluteIndex = require('../internals/to-absolute-index');\nvar toLength = require('../internals/to-length');\n\n// `Array.prototype.fill` method implementation\n// https://tc39.github.io/ecma262/#sec-array.prototype.fill\nmodule.exports = function fill(value /* , start = 0, end = @length */) {\n  var O = toObject(this);\n  var length = toLength(O.length);\n  var argumentsLength = arguments.length;\n  var index = toAbsoluteIndex(argumentsLength > 1 ? arguments[1] : undefined, length);\n  var end = argumentsLength > 2 ? arguments[2] : undefined;\n  var endPos = end === undefined ? length : toAbsoluteIndex(end, length);\n  while (endPos > index) O[index++] = value;\n  return O;\n};\n","<template>\n  <div id=\"info\">\n    <a href=\"http://threejs.org\" target=\"_blank\">three.js</a> - lines - random\n  </div>\n</template>\n<style scoped>\n  #info {\n    position: absolute;\n    top: 10px;\n    width: 100%;\n    text-align: center;\n    color: #fff;\n  }\n</style>\n<script>\n  /* eslint no-param-reassign: off */\n  import 'three/examples/js/renderers/Projector';\n  import makeSprite from 'utils/makeSprite';\n\n  var mouseX = 0,\n    mouseY = 0,\n    windowHalfX = window.innerWidth / 2,\n    windowHalfY = window.innerHeight / 2;\n  var camera,\n    scene,\n    renderer;\n\n  function onWindowResize() {\n    windowHalfX = window.innerWidth / 2;\n    windowHalfY = window.innerHeight / 2;\n\n    camera.aspect = window.innerWidth / window.innerHeight;\n    camera.updateProjectionMatrix();\n\n    renderer.setSize(window.innerWidth, window.innerHeight);\n  }\n\n  function onDocumentMouseMove(event) {\n    mouseX = event.clientX - windowHalfX;\n    mouseY = event.clientY - windowHalfY;\n  }\n\n  function onDocumentTouchStart(event) {\n    if (event.touches.length > 1) {\n      event.perventDefault();\n\n      mouseX = event.touches[0].pageX - windowHalfX;\n      mouseY = event.touches[0].pageY - windowHalfX;\n    }\n  }\n\n  function onDocumentTouchMove(event) {\n    if (event.touches.length === 1) {\n      event.perventDefault();\n\n      mouseX = event.touches[0].pageX - windowHalfX;\n      mouseY = event.touches[0].pageY - windowHalfY;\n    }\n  }\n\n  function render() {\n    camera.position.x += (mouseX - camera.position.x) * 0.05;\n    camera.position.y += ((mouseY + 200) - camera.position.y) * 0.05;\n    camera.lookAt(scene.position);\n\n    renderer.render(scene, camera);\n  }\n\n  function animate() {\n    window.requestAnimationFrame(animate);\n    render();\n  }\n\n  function init(container) {\n    var particle;\n\n    camera = new THREE.PerspectiveCamera(75, window.innerWidth / window.innerHeight, 1, 10000);\n    camera.position.z = 100;\n\n    scene = new THREE.Scene();\n\n    renderer = new THREE.WebGLRenderer();\n    renderer.setPixelRatio(window.devicePixelRatio);\n    renderer.setSize(window.innerWidth, window.innerHeight);\n    container.appendChild(renderer.domElement);\n\n    const material = new THREE.SpriteMaterial({\n      color: 0xffffff,\n      map: makeSprite(),\n    });\n\n    const geometry = new THREE.Geometry();\n    for (let i = 0; i < 100; i++) {\n      particle = new THREE.Sprite(material);\n      particle.position.x = (Math.random() * 2) - 1;\n      particle.position.y = (Math.random() * 2) - 1;\n      particle.position.z = (Math.random() * 2) - 1;\n      particle.position.normalize();\n      particle.position.multiplyScalar((Math.random() * 10) + 450);\n      particle.scale.x = particle.scale.y = 10;\n      scene.add(particle);\n\n      geometry.vertices.push(particle.position);\n    }\n\n    const line = new THREE.Line(geometry, new THREE.LineBasicMaterial({\n      color: 0xffffff,\n      opacity: 0.5,\n    }));\n    scene.add(line);\n\n    document.addEventListener('mousemove', onDocumentMouseMove, false);\n    document.addEventListener('touchstart', onDocumentTouchStart, false);\n    document.addEventListener('touchmove', onDocumentTouchMove, false);\n\n    window.addEventListener('resize', onWindowResize, false);\n  }\n\n  export default {\n    mounted() {\n      init(this.$el);\n      animate();\n    },\n  };\n</script>\n","var $ = require('../internals/export');\nvar fill = require('../internals/array-fill');\nvar addToUnscopables = require('../internals/add-to-unscopables');\n\n// `Array.prototype.fill` method\n// https://tc39.github.io/ecma262/#sec-array.prototype.fill\n$({ target: 'Array', proto: true }, {\n  fill: fill\n});\n\n// https://tc39.github.io/ecma262/#sec-array.prototype-@@unscopables\naddToUnscopables('fill');\n","var render = function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _vm._m(0)}\nvar staticRenderFns = [function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c('div',{attrs:{\"id\":\"info\"}},[_c('a',{attrs:{\"href\":\"http://threejs.org\",\"target\":\"_blank\"}},[_vm._v(\"three.js\")]),_vm._v(\" - lines - random \")])}]\n\nexport { render, staticRenderFns }","import mod from \"-!../../node_modules/cache-loader/dist/cjs.js??ref--12-0!../../node_modules/thread-loader/dist/cjs.js!../../node_modules/babel-loader/lib/index.js!../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../node_modules/vue-loader/lib/index.js??vue-loader-options!./Lines.vue?vue&type=script&lang=js&\"; export default mod; export * from \"-!../../node_modules/cache-loader/dist/cjs.js??ref--12-0!../../node_modules/thread-loader/dist/cjs.js!../../node_modules/babel-loader/lib/index.js!../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../node_modules/vue-loader/lib/index.js??vue-loader-options!./Lines.vue?vue&type=script&lang=js&\"","import { render, staticRenderFns } from \"./Lines.vue?vue&type=template&id=e1fe9fbe&scoped=true&\"\nimport script from \"./Lines.vue?vue&type=script&lang=js&\"\nexport * from \"./Lines.vue?vue&type=script&lang=js&\"\nimport style0 from \"./Lines.vue?vue&type=style&index=0&id=e1fe9fbe&scoped=true&lang=css&\"\n\n\n/* normalize component */\nimport normalizer from \"!../../node_modules/vue-loader/lib/runtime/componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  \"e1fe9fbe\",\n  null\n  \n)\n\nexport default component.exports"],"sourceRoot":""}